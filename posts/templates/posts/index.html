{% extends 'base.html' %}
{% load static %}
{% block stylesheet %}
<link rel="stylesheet" type="text/css" href="{% static 'CSS/index.css' %}" />
{% endblock %}

{% block title %}Posts{% endblock %}

{% block content %}
  <div class="container">
    <div class="row">

      <div class="col-md-3 sidebar">
        <div class="filter sticky-top">
          <div class="filter-title">Filter by Tag</div>
          <ul class="list-group">
            {% for tag in tag_list %}
              <a class="tag list-group-item list-group-item-action" id="{{tag.name}}" href="{% url 'posts:index' tag.name %}">
                {{ tag }}<span class="badge badge-info badge-pill count-badge">{{ tag.post_set.all.count }}</span>
              </a>
            {% endfor %}
          </ul><br>
        </div>
      </div>


      <div class="col-md-9 posts">
          {% if post_list %}

            {% for post in post_list %}
            <div class="post">
              <h4>{{ post.title }}</h4>
              <div class="post-time">{{ post.pub_time }}</div>
              <div class="post-text">{{ post.text|striptags|safe|truncatechars:200 }}</div>

              <a class="btn btn-outline-info btn-sm" href="{% url 'posts:detail' post.id %}" role="button">Read more</a>
            </div>
            {% endfor %}
            <div id="newItems"></div>

          {% else %}
            <p>No posts yet.</p>
          {% endif %}
      </div>

    </div>

  </div>

{% endblock %}

{% block javascript %}<script src="{% static 'js/header.js' %}"></script>
<script>
$(document).ready(function() {
  var tag = "{{ tag_chosen }}";
  if (tag != null) {
    var tag_name = "{{ tag_chosen.name }}"
    $('.tag[id=' + tag_name + ']').addClass('active');
  }
});
</script>
{% endblock %}
